import{f as l,t as i,e as J,s as e,h as g,i as $,j as xt}from"../chunks/disclose-version.Cw2uwD9G.js";import{i as St,q as m,l as Ft,e as o,g as t,o as c,f as A}from"../chunks/runtime.DWU_H_Yo.js";import{d as $t,s as w}from"../chunks/render.CSWyOgtJ.js";import{o as wt,i as u,b as Yt,p as f}from"../chunks/index-client.BD8xqTpq.js";var At=i('<div id="loading-screen" class="svelte-mevp8a"><p id="loading-text" class="svelte-mevp8a">Loading! &lt;3</p></div>'),Nt=i(`<p>Your friend, Robert, has agreed to help you sell bottles.</p> <p>Better yet, he'll do it for free! He sure is a real one. What a benevolent young man. (His mom
		told him he has to because she thinks he has too few friends.)</p> <p>He'll sell about 1 bottle per second.</p>`,1),qt=(N,s)=>{o(s,!0)},Dt=i("<p>All this purchasing, filling, and selling is growing exhausting.</p> <p>You feel that you can get some friends to help you with your business.</p> <button>Ask a friend.</button>",1),Lt=i("<p> </p>"),It=(N,s,v)=>{t(s)&&o(v,f(t(s).value))},Wt=i(`<p>Your water bottles have become so popular amongst the running community that you figure you can
		purchase (slightly more expensive) labeled bottles with your brand on them.</p> <p>And, of course, mark up the price thanks to brand recognition.</p> <p>What will your brand name be?</p> <input> <button>Let's do it.</button>`,1),Ct=i(`<p>Your mom is proud to have raised a little entrepreneur, but she's worried that you'll run up the
		water bill.</p> <p>She proposes that you can keep business running if you pay her $0.10 for every bottle you fill.</p>`,1),Ht=i("<p>This is turning out to be quite the luxurious business. You're basically rolling in cash, now.</p>"),Jt=i(`<p>Your mom gave you $5 for your birthday.</p> <p>You figure you can make some quick cash by selling water bottles filled from the tap to thirsty
		passersby on the street.</p>`,1),Ot=(N,s,v,y,F)=>{o(s,t(s)-t(v)),o(y,t(y)+15),o(F,!0)},Pt=(N,s,v,y,F,q)=>{o(s,t(s)-1),o(v,t(v)+1),o(y,!0),t(F)&&o(q,t(q)-.1)},Rt=i("<br> Costs $0.10.",1),Ut=i("<p> </p> <button>Fill bottle with tap water. <!></button>",1),jt=(N,s,v,y,F,q)=>{o(s,t(s)-1),o(v,t(v)+1),o(y,t(y)+t(F)),o(q,!0)},Et=i("<p> </p> <button>Sell bottle to thirsty passerby. <br> </button>",1),Kt=i("You (and your friends) have",1),Mt=i("You've",1),Tt=i("<p><!> </p>"),zt=i("<!> <!> <hr> <p> </p> <button>Purchase 15-pack of empty<!> bottles. <br> </button> <!> <!> <!>",1);function Zt(N,s){St(s,!0);const v=2;function y(){return{version:v,hasBoughtBottle:t(P),hasFilledBottle:t(R),hasSoldBottle:t(U),hasAskedFriend:t(D),money:t(h),emptyBottles:t(Y),filledBottles:t(b),soldBottles:t(d),brandName:t(B)}}function F(a){(()=>{const r=a;return o(R,f(r.hasFilledBottle)),o(P,f(r.hasBoughtBottle)),o(U,f(r.hasSoldBottle)),o(D,f(r.hasAskedFriend)),o(h,f(r.money)),o(Y,f(r.emptyBottles)),o(b,f(r.filledBottles)),o(d,f(r.soldBottles)),o(B,f(r.brandName)),r})()}function q(){return{version:v,hasBoughtBottle:!1,hasFilledBottle:!1,hasSoldBottle:!1,hasAskedFriend:!1,money:5,emptyBottles:0,filledBottles:0,soldBottles:0,brandName:null}}const tt="water-incremental-save";function vt(){localStorage.setItem(tt,JSON.stringify(y())),console.log("Wrote save to local storage.")}function pt(){const a=localStorage.getItem(tt);if(a!==null){let r=JSON.parse(a);F(r),console.log("Read save from local storage.")}else{let r=q();F(r),console.log("Found no save in local storage.")}}let O;function et(a){t(D)&&t(b)>0&&(O||(O=a),a-O>=1e3&&(o(d,t(d)+1),o(b,t(b)-1),o(h,t(h)+t(z)),O=a)),requestAnimationFrame(et)}wt(async()=>{pt(),setInterval(()=>vt(),1e3),requestAnimationFrame(et),o(rt,!1)});let rt=c(!0),P=c(!1),R=c(!1),U=c(!1),D=c(!1),h=c(5),Y=c(0),b=c(0),d=c(0),dt=A(()=>t(d)>=50),j=A(()=>t(d)>=110),_t=A(()=>t(d)>=170),mt=A(()=>t(d)>=210),ct=A(()=>t(Y)<1||t(j)&&t(h)<.1),B=c(null),M=c(null),T=A(()=>t(B)?7:5),z=A(()=>t(B)?.8:.5);function ft(a,r,p){return a==1?r:p}function G(a){return ft(a,"","s")}function ht(a){return a%1===0?a.toLocaleString("en-US",{maximumFractionDigits:0,minimumFractionDigits:0}):a.toLocaleString("en-US",{maximumFractionDigits:2,minimumFractionDigits:2})}let Q=ht;var at=zt(),ot=g(at);u(ot,()=>t(rt),a=>{var r=At();l(a,r)});var lt=e(e(ot,!0));u(lt,()=>t(D),a=>{var r=Nt();l(a,r)},a=>{var r=J(),p=g(r);u(p,()=>t(mt),k=>{var n=Dt(),_=g(n),x=e(e(_,!0)),S=e(e(x,!0));S.__click=[qt,D],l(k,n)},k=>{var n=J(),_=g(n);u(_,()=>t(B),x=>{var S=Lt(),V=$(S);m(()=>w(V,`With your new-found brand name of ${t(B)??""}, you've marked up your bottled tap water from
		$0.50 to $0.80.`)),l(x,S)},x=>{var S=J(),V=g(S);u(V,()=>t(_t),X=>{var I=Wt(),Z=g(I),W=e(e(Z,!0)),L=e(e(W,!0)),K=e(e(L,!0));Yt(K,H=>o(M,f(H)),()=>t(M));var C=e(e(K,!0));C.__click=[It,M,B],l(X,I)},X=>{var I=J(),Z=g(I);u(Z,()=>t(j),W=>{var L=Ct();l(W,L)},W=>{var L=J(),K=g(L);u(K,()=>t(dt),C=>{var H=Ht();l(C,H)},C=>{var H=Jt();l(C,H)},!0),l(W,L)},!0),l(X,I)},!0),l(x,S)},!0),l(k,n)},!0),l(a,r)});var bt=e(e(lt,!0)),nt=e(e(bt,!0)),gt=$(nt);m(()=>w(gt,`You have $${Q(t(h))??""}.`));var E=e(e(nt,!0));E.__click=[Ot,h,T,Y,P];var st=e($(E));u(st,()=>t(B),a=>{var r=xt(a);m(()=>w(r,`, ${t(B)??""}-branded`)),l(a,r)});var yt=e(e(st,!0)),Bt=e(yt,!0);m(()=>w(Bt,` Costs $${Q(t(T))??""}.`));var it=e(e(E,!0));u(it,()=>t(P),a=>{var r=Ut(),p=g(r),k=$(p);m(()=>w(k,`You have ${t(Y)??""} empty bottle${G(t(Y))??""}.`));var n=e(e(p,!0));n.__click=[Pt,Y,b,R,j,h];var _=e($(n));u(_,()=>t(j),x=>{var S=Rt();l(x,S)}),m(()=>n.disabled=t(ct)),l(a,r)});var ut=e(e(it,!0));u(ut,()=>t(R),a=>{var r=Et(),p=g(r),k=$(p);m(()=>w(k,`You have ${t(b)??""} filled bottle${G(t(b))??""}.`));var n=e(e(p,!0));n.__click=[jt,b,d,h,z,U];var _=e($(n)),x=e(_,!0);m(()=>w(x,` Earns $${Q(t(z))??""}.`)),m(()=>n.disabled=t(b)<1),l(a,r)});var kt=e(e(ut,!0));u(kt,()=>t(U),a=>{var r=Tt(),p=$(r);u(p,()=>t(D),n=>{var _=Kt();l(n,_)},n=>{var _=Mt();l(n,_)});var k=e(p,!0);m(()=>w(k,` sold ${t(d)??""}
		filled bottle${G(t(d))??""}.`)),l(a,r)}),m(()=>E.disabled=t(h)<t(T)),l(N,at),Ft()}$t(["click"]);export{Zt as component};
